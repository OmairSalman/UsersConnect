<div class="edit-profile-card">
  <h1>Edit User (Admin)</h1>
  
  <!-- User Info Header -->
  <div class="d-flex align-items-center mb-4 pb-3 border-bottom">
    <img 
      src="{{user.avatarURL}}" 
      alt="{{user.name}}'s avatar" 
      class="edit-avatar-img me-3"
      style="width: 64px; height: 64px; border-radius: 50%;">
    <div>
      <h5 class="mb-0">{{user.name}}</h5>
      <small class="text-muted">User ID: {{user._id}}</small>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- SECTION 1: Edit Name -->
  <!-- ============================================ -->
  <div class="mb-4">
    <h5>Display Name</h5>
    <form id="admin-edit-name-form" data-userid="{{user._id}}">
      <div class="form-group mb-2">
        <label for="edit-name">Name</label>
        <input 
          type="text" 
          id="edit-name" 
          name="name" 
          value="{{user.name}}" 
          class="form-control" 
          required 
          minlength="1"
          maxlength="50">
      </div>
      <button type="submit" class="btn btn-primary btn-sm">Save Name</button>
      <small id="name-msg" class="form-text ms-2"></small>
    </form>
  </div>

  <hr>

  <!-- ============================================ -->
  <!-- SECTION 2: Edit Email -->
  <!-- ============================================ -->
  <div class="mb-4">
    <h5>Email Address</h5>
    <form id="admin-edit-email-form" data-userid="{{user._id}}">
      <div class="form-group mb-2">
        <label for="edit-email">Email</label>
        <input 
          type="email" 
          id="edit-email" 
          name="email" 
          value="{{user.email}}" 
          class="form-control" 
          required>
        <small class="form-text text-muted">
          Changing the email will update the Gravatar avatar (if using Gravatar) and reset email verification.
        </small>
      </div>
      <button type="submit" class="btn btn-primary btn-sm">Save Email</button>
      <small id="email-msg" class="form-text ms-2"></small>
    </form>
  </div>

  <hr>

  <!-- ============================================ -->
  <!-- SECTION 3: Change Password -->
  <!-- ============================================ -->
  <div class="mb-4">
    <h5>Password</h5>
    <form id="admin-edit-password-form" data-userid="{{user._id}}">
      <div class="form-group mb-2">
        <label for="new-password">New Password</label>
        <input 
          type="password" 
          id="new-password" 
          name="newPassword" 
          class="form-control" 
          minlength="6"
          placeholder="Enter new password (min 6 characters)">
        <small class="form-text text-muted">
          Leave blank to keep current password.
        </small>
      </div>
      <button type="submit" class="btn btn-primary btn-sm">Change Password</button>
      <small id="password-msg" class="form-text ms-2"></small>
    </form>
  </div>

  <hr>

  <!-- Back to Users Link -->
  <div class="mt-4">
    <a href="/admin/users" class="btn btn-secondary">‚Üê Back to Users</a>
  </div>
</div>

<script src="/js/admin-edit-user.js"></script>